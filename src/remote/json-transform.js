"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.JSONTransform = void 0;

var _stream = require("stream");

class JSONTransform extends _stream.Transform {
  constructor(options = {}) {
    super({ ...options,
      objectMode: true
    });
  }

  _transform(chunk, encoding, done) {
    try {
      return void setImmediate(done, null, JSON.parse(chunk.toString('utf8')));
    } catch (err) {
      return void done(err);
    }
  }

}

exports.JSONTransform = JSONTransform;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tdHJhbnNmb3JtLm1qcyJdLCJuYW1lcyI6WyJKU09OVHJhbnNmb3JtIiwiVHJhbnNmb3JtIiwiY29uc3RydWN0b3IiLCJvcHRpb25zIiwib2JqZWN0TW9kZSIsIl90cmFuc2Zvcm0iLCJjaHVuayIsImVuY29kaW5nIiwiZG9uZSIsInNldEltbWVkaWF0ZSIsIkpTT04iLCJwYXJzZSIsInRvU3RyaW5nIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBS0EsTUFBTUEsYUFBTixTQUE0QkMsaUJBQTVCLENBQXNDO0FBQ3BDQyxFQUFBQSxXQUFXLENBQUNDLE9BQU8sR0FBRyxFQUFYLEVBQWU7QUFDeEIsVUFBTSxFQUFFLEdBQUdBLE9BQUw7QUFBY0MsTUFBQUEsVUFBVSxFQUFFO0FBQTFCLEtBQU47QUFDRDs7QUFFREMsRUFBQUEsVUFBVSxDQUFDQyxLQUFELEVBQVFDLFFBQVIsRUFBa0JDLElBQWxCLEVBQXdCO0FBQ2hDLFFBQUk7QUFLRixhQUFPLEtBQUtDLFlBQVksQ0FBQ0QsSUFBRCxFQUFPLElBQVAsRUFBYUUsSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssQ0FBQ00sUUFBTixDQUFlLE1BQWYsQ0FBWCxDQUFiLENBQXhCO0FBQ0QsS0FORCxDQU1FLE9BQU9DLEdBQVAsRUFBWTtBQUNaLGFBQU8sS0FBS0wsSUFBSSxDQUFDSyxHQUFELENBQWhCO0FBQ0Q7QUFDRjs7QUFmbUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFuc2Zvcm0gfSBmcm9tICdzdHJlYW0nXG5cbi8qKlxuICogR2l2ZW4gYSByYXcgYnVmZmVyLCBhdHRlbXB0IHRvIHBhcnNlIGl0IGFzIEpTT05cbiAqL1xuY2xhc3MgSlNPTlRyYW5zZm9ybSBleHRlbmRzIFRyYW5zZm9ybSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHsgLi4ub3B0aW9ucywgb2JqZWN0TW9kZTogdHJ1ZSB9KVxuICB9XG5cbiAgX3RyYW5zZm9ybShjaHVuaywgZW5jb2RpbmcsIGRvbmUpIHtcbiAgICB0cnkge1xuICAgICAgLy8gRGVsYXkgdGhlIGRlbGl2ZXJ5IHVudGlsIG5leHQgbG9vcCBiZWNhdXNlIGl0IG1pZ2h0IGhhcHBlbiB0aGF0IHNvbWUgb3RoZXIsIHVucmVsYXRlZFxuICAgICAgLy8gZXJyb3Igb2NjdXJzIGRvd24gdGhlIHN0YWNrIChzb21ld2hlcmUgaW5zaWRlIGRvbmUoKSwgYmFzaWNhbGx5KSB3aGljaCB3b3VsZCB0cmlnZ2VyIHRoZVxuICAgICAgLy8gY2F0Y2ggYmxvY2sgYmVsb3cgYW5kIGNhdXNlIHRoZSBkb25lKCkgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFnYWluLCBlZmZlY3RpdmVseSBtYXNraW5nXG4gICAgICAvLyB0aGUgcmVhbCBwcm9ibGVtLiDimqDvuI9cbiAgICAgIHJldHVybiB2b2lkIHNldEltbWVkaWF0ZShkb25lLCBudWxsLCBKU09OLnBhcnNlKGNodW5rLnRvU3RyaW5nKCd1dGY4JykpKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHZvaWQgZG9uZShlcnIpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7XG4gIEpTT05UcmFuc2Zvcm0sXG59XG4iXX0=